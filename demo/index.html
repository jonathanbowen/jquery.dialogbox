<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Dialogbox - jQuery dialog boxes</title>
    <link rel="stylesheet" type="text/css" href="../jquery.dialogbox.css" />
<link type="text/css" rel="stylesheet" href="dp.SyntaxHighlighter/Styles/SyntaxHighlighter.css" />

<script type="text/javascript" src="dp.SyntaxHighlighter/Scripts/shCore.js"></script>
<script type="text/javascript" src="dp.SyntaxHighlighter/Scripts/shBrushXml.js"></script>
<script type="text/javascript" src="dp.SyntaxHighlighter/Scripts/shBrushJScript.js"></script>
<style type="text/css">
    body {
        font: .9em "Trebuchet MS", Arial, Helvetica, sans-serif;
        margin: 0;
        background: #4c9ccd;
        color: #444;
        line-height: 1.4;
    }
    h1, h2, h3, h4, h5, h6 {
        color: #4c9ccd;
        margin: 1em 0 .3em;
        letter-spacing: -.02em;
    }
    h4, h5, h6 {
        margin-bottom: 0;
    }
    h1 {
        font-size: 3.4em;
    }
    h2 {
        font-size: 2.5em;
    }
    h3 {
        font-size: 1.5em;
    }
    h4 {
        font-size: 1.25em;
    }
    h5 {
        font-size: 1.05em;
    }
    h6 {
        font-size: 1em;
        color: #444;
    }
    p {
        margin: .6em 0;
    }
    #features-list li, #dependencies-list li {
        background: url(star.png) 15px 1px no-repeat;
        padding-left: 40px;
    }
    li {
        margin: .5em 0;
    }
    ul {
        margin: .5em 0;
        list-style-type: none;
        padding: 0;
    }
    *:first-child {
        margin-top: 0;
    }
    .dp-highlighter, pre {
        font: .85em "Courier New", Courier, monospace;
    }
    div.dp-highlighter {
        margin: 10px 0 0 !important;
    }
    div.dp-highlighter:first-child {
        margin: 0 !important;
    }
    .slide {
        margin-left: .5em;
    }
    .external {
        padding-right: 13px;
        background: url(external.png) right center no-repeat;
    }
    #container {
        -moz-border-radius: 20px;
        -webkit-border-radius: 20px;
        background: #fff;
        width: 900px;
        margin: 20px auto;
        padding: 30px;
    }
    input, select, textarea {
        font: 1em "Trebuchet MS", Arial, Helvetica, sans-serif;
        color: #398cbf;
        background: #eff9ff;
        border: 1px solid;
        padding: 2px;
    }
    input:focus, select:focus, textarea:focus {
        color: #444;
        background: #fff;
    }
    table {
      width: 100%;
    }
    table {
        border-spacing: 5px;
        border: 1px solid #e1f2fd;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
    }
    td, th {
      padding: 6px 9px;
      border: 0;
      border-spacing: 2px;
      text-align: left;
      vertical-align: top;
        background: #ecf8ff;
        -moz-border-radius: 2px;
        -webkit-border-radius: 2px;
    }
    .slide-list {
        list-style: none;
        margin: 1em 0;
        padding: 0;
    }
    .slide-list li {
        margin: 0;
        padding: 0;
    }
    .function-info p:first-child {
        margin-top: 0;
    }
    .function-info p:last-child {
        margin-bottom: 0;
    }
    #functions a {
        font-size: .7em;
        margin-left: .5em;
    }
    a {
        color: #4c9ccd;
        font-weight: bold;
        text-decoration: underline;
    }
    #container .dp-highlighter a {
        font-weight: normal;
        padding: 0;
    }
    a:hover {
        color: #398cbf;
        text-decoration: none;
    }
    div.example p a, .slide-list h3 a {
        font-weight: normal;
    }
    div.example p a, p a:active, li a:active, .slide-list h3 a, #container input[type=submit] {
        background-color: #4c9ccd;
        color: #fff;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        text-decoration: none;
        border: 0;
        cursor: pointer;
    }
    p a:active, li a:active {
        font-weight: bold;
    }

    .slide-list h3 a:active {
        font-weight: normal;
    }

    #container .slide-list li > div > div, .code > div {
        
        background: #fff;
        -moz-border-radius: 3px;
        -webkit-border-radius: 3px;
        padding: 0 10px 10px;
        margin-top: 10px;
    }
    div.code > div  {
        padding-top: 10px;
    }
    .code {
        min-height: 1px;
    }
    .slide-list h3 {
        margin: 0;
        font-size: 1.2em;
    }
    #container .slide-list li > div div h4:first-child,
    #container .slide-list li > div div p:first-child {
      padding: 10px 0 0;
    }
    .example p a, .slide-list h3 a {
        padding: 3px 5px;
    }
    .slide-list h3 a, .slide-list h3 a:active {
        padding: 3px 5px 3px 20px;
        color: #398cbf;
        background: url(collapsed.png) left center no-repeat;
    }
    .slide-list h3 a:hover {
        text-decoration: underline;
    }
    .slide-list h3 a.expanded {
        background: url(expanded.png) left center no-repeat;
    }
    #container input[type=submit] {
        font-size: 1.2em;
    }
    .example a:hover, #container input[type=submit]:hover {
        background-color: #398cbf;
        color: #fff;
        opacity: 1;
    }
    p a:active, li a:active, .example p a:active {    
        background-color: #39bf42;
        opacity: 1;
    }
    .expanders {
        text-align: right;
    }
    .expanders a {
        margin-left: .8em;
        padding-left: 19px;
        background-repeat: no-repeat;
        background-position: 0 50%;
    }
    .expand-all {
        background-image: url(toggle.png);
    }
    .collapse-all {
        background-image: url(toggle_collapse.png);
    }
    .slide {
        position: absolute;
        top: 10px;
        right: 10px;
    }
    .example, .slide-list li {
        padding: 10px 10px /*
5px
*/;
        background: #e1f2fd;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        margin-bottom: 10px;
        position: relative;
    }
    .slide-list li {
        padding-bottom: 10px;
    }
    .example p {
        margin: 0;
        padding: 5px 0 ;
    }
    .example a[id], #container input[type=submit] {
        font-size: 1.2em;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;        
        background-image: url(control_play_blue.png);
        background-position: 5px 50%;
        background-repeat: no-repeat;
        padding: 5px 7px 5px 25px;
    }/*

    .code {
        margin: 5px 0;
    }
*/
    .dp-highlighter {
        margin: 0 !important;
        width: auto;
    }
    #totop {
        position: fixed;
        bottom: 10px;
        right: 30px;
        border: 1px solid #fff;
        display: none;
    }
    img {
        float: right;
        margin: 0 0 1em 1em;
    }
    .tip {
        position: absolute;
        background: #e1f2fd;
        color: #025783;
        padding: 7px 14px;
        border: 4px solid #c5e7fd;
        -moz-border-radius: 5px;
        -webkit-border-radius: 5px;
        z-index: 100;
    }
    #toc {
        position: fixed;
        bottom: 0;
        right: 0;
        font-size: .85em;
        width: 100%;
        border-bottom: 1px solid #398cbf;
        z-index: 99;
        overflow: hidden;
        white-space: nowrap;
    }
    #toc div, #hide_link {
        padding: 10px 0;
        background: #4c9ccd;
        color: #fff;
        float: right;
        width: 100%;
        -moz-border-radius: 10px;
        -webkit-border-radius: 10px;
    }
    #toc, #toc * {
        color: #fff;
    }
    #toc h2 {
        margin: 0 0 0 20px;
        float: left;
        font-size: 1em;
    }
    #toc ul {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    #toc li {
        display: inline;
        margin-left: 10px
    }
    #hide_link {
        position: absolute;
        top: 0;
        right: 0;
        padding: 10px 20px 10px 5px;
        width: auto;
        min-width: 2.6em;
        text-align: right;
        outline: none;
    }
    #playpen-form div {
        margin-bottom: 5px;
    }
    #playpen-textarea {
        width: 100%;
        height: 10em;
        margin-left: -3px;
        font: .8em "Courier New", Courier, monospace;
    }
    .blacknpink #dialogbox_top_left {
        background: url(/jquery.dialogbox/images/dialogbox_blacknpink_left.png) left top no-repeat;
    }
    .blacknpink #dialogbox_top_right {
        background: url(/jquery.dialogbox/images/dialogbox_blacknpink_right.png) right top no-repeat;
    }
    .blacknpink #dialogbox_bottom_left {
        background: url(/jquery.dialogbox/images/dialogbox_blacknpink_left.png) left bottom no-repeat;
    }
    .blacknpink #dialogbox_bottom_right {
        background: url(/jquery.dialogbox/images/dialogbox_blacknpink_right.png) right bottom no-repeat;
    }
    .blacknpink #dialogbox_top_left, .blacknpink #dialogbox_bottom_left {
        width: 26px;
    }
    .blacknpink #dialogbox_bottom_right {
        left: 26px;
    }
    .blacknpink #dialogbox_top_left, .blacknpink #dialogbox_top_right {
        height: 59px;
    }
    .blacknpink #dialogbox_top_right {
        margin-left: 26px;
    }
    #dialogbox_outer.blacknpink {
        color: #fff;
        font: 1.1em Arial, Helvetica, sans-serif;
    }
    .blacknpink #dialogbox_handle, .blacknpink #dialogbox_handle_inner {
        height: 39px;
        color: #000;
        font-size: 1.1em;
        text-align: center;
        font-weight: bold;
    }
    .blacknpink #dialogbox_handle_inner {
        padding: 15px;    
    }
    .blacknpink #dialogbox_message_inner {
        background: #000;    
    }
    .blacknpink #dialogbox_inner #dialogbox_buttons input {
        background-image: url(../images/dialogbox_buttons_blacknpink.png);
        color: #fff;
    }
    .blacknpink #dialogbox_inner #dialogbox_buttons input:active, .blacknpink #dialogbox_inner #dialogbox_buttons input.dialogbox_active {
        color: #000;
    }
    .blacknpink #dialogbox_inner #dialogbox_buttons {
        bottom: 22px;
    }
    #dialogbox_mask.blacknpink {
        background: #b83f91;
    }
</style>
</head>
<body id="top">
    <div id="container">
    
    <!-- mdstart -->
        
    <h1>Dialogbox - jQuery dialog boxes</h1>
    
    <p>
        <img style="cursor: pointer;" src="box-sample.png" alt="Example dialog box" title="Example box - click for demo" width="266" height="167" />
        Dialogbox is a jQuery plugin for creating custom dialog boxes that float on top of a web page and respond dynamically to user interaction.
    </p>
    
    <p>
        The boxes are designed to emulate the standard javasript dialogs, but with many more options to configure content, 
        behaviour and handling of user data, a slew of methods for reacting to user input, 
        and without the clunkiness and annoyance of regular js dialogs.
    </p>
    
    <p>
        This is a very new plugin though, and I don't doubt still has plenty of big, juicy bugs waiting to be discovered...
    </p>
    <!-- nomd -->
    <div id="toc">
        <div>
        <h2>Jump to:</h2>
        <ul>
            <li><a href="#top">Top of page</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#examples">Examples</a></li>            <li><a href="#usage">Usage</a></li>            <li><a href="#options">Options</a></li>
            <li><a href="#functions">Methods</a></li>
            <li><a href="#playpen">Playpen</a></li>
        </ul>
        </div>
        <a id="hide_link" href="#">Hide</a>
    </div>
    <!-- /nomd -->
    <h2 id="features">Features:</h2>
    
    <ul id="features-list">    	<li>Can be created as 'alert', 'confirm' or 'prompt' boxes</li>    	<li>Boxes can be customised to contain any content including form elements</li>
        <li>Can be triggered on all kinds of events, and customised according to the event target</li>    	<li>Easily set or retrieve data from any form fields within the box</li>    	<li>Customiseable 'confirm' and 'cancel' functions to respond to user input</li>
        <li>Many other customiseable settings </li>
        <li>Built-in functions for sending ajax requests</li>    	<li>Fully keyboard accessible - return/escape keys can be used to confirm/cancel, and arrow keys to move between Ok and Cancel buttons</li>
        <li>Boxes can be dragged around the window, constrained within the visible viewport</li>
        <li>Appearance of boxes can be changed using CSS</li>
        <li>Compatible with Firefox, Opera, Chrome and Internet Explorer 6+</li>    </ul>
    
    <h2 id="examples">Examples:</h2>
        
    <div class="example">
    <p><a href="#nojs" id="example-1">Alert box</a> </p>
    <div class="code"><div><pre class="js">    $('#example-1').dialogbox('Alert!');</pre></div></div>
    </div>
    
    <div class="example">
    <p><a href="#nojs" id="example-2">Confirm box</a></p>
    <div class="code"><div><pre class="js">    $('#example-2').dialogbox({
        message: 'Confirm?',
        type: 'confirm',
        confirm: function(box) {
            box.open('Confirmed!');
        },
        cancel: function(box) {
            box.open('Cancelled!');
        }
    });</pre></div></div>
    </div>
    
    <div class="example"><p><a href="#nojs" id="example-3">Prompt box</a></p>
    <div class="code"><div><pre class="js">    $('#example-3').dialogbox({
        message: 'What is your name?',
        type: 'prompt',
        confirm: function(box) {
            var answer = $.trim(box.prompt().replace(/[^a-z0-9\s]/ig, ''));
            box.open('Hello, ' + (answer ? answer : 'anonymous') + '!');
        }
    });</pre></div></div>
    </div>
    
    <div class="example">
    <p><a href="#loginform" id="example-4">Custom form inputs and ajax request</a> (hint: password is 'password')</p>
        <div class="code"><div><h6>HTML:</h6>
                <pre class="html">    &lt;a href=&quot;#loginform&quot; id=&quot;example-4&quot;&gt;Custom form inputs and ajax request&lt;/a&gt;
    &lt;form id=&quot;loginform&quot; method=&quot;post&quot; action=&quot;login.php&quot;&gt;
        &lt;fieldset&gt;
            &lt;legend&gt;Login to continue:&lt;/legend&gt;
            &lt;div id=&quot;loginform-inner&quot;&gt;
                &lt;label for=&quot;username&quot;&gt;Username:&lt;/label&gt;
                &lt;input type=&quot;text&quot; name=&quot;username&quot; value=&quot;username&quot; id=&quot;username&quot; /&gt;
                &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
                &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; /&gt;
                &lt;span&gt;&lt;/span&gt;
            &lt;/div&gt;
            &lt;input type=&quot;submit&quot; value=&quot;Login&quot; /&gt;
        &lt;/fieldset&gt;
    &lt;/form&gt;</pre>
                <h6>Javascript:</h6>
                <pre class="js">    // hide the form
    $('#loginform').hide();
    $('#example-4').dialogbox({
        
        // use a div within the form as the message
        message: $('#loginform-inner'),
        type: 'confirm',
        
        // get box title and ok button text
        // from the form's legend and submit button respectively
        title: $('#loginform legend').text(),
        okText: $('#loginform input[type=submit]').val(),
        
        // focus on password field
        focus: '#password',
        confirm: function(box) {
            
            // add loading indicator
            // (this also prevents the box from automatically closing)
            box.addLoadbar();
            
            // and send ajax request with the form data from the box
            $.post($('#loginform').attr('action'), box.serialize(), function(response) {
            
                if (!response) {
                    $(document).trigger('ajaxError');
                    return;
                }
                
                // if login successful, open alert box with success message
                if (response.success) {
                    box.open(response.report);
                    
                // otherwise, add error message to box content
                } else {
                    $('#loginform-inner span').text(response.report);
                    
                    // animate the box to accomodate new content
                    box.set();
                }
            }, 'json');
        },
        
        // when the box is closed, the div is restored to its original location,
        // so just need to restore it to its initial state for when the box is reopened
        close: function() {
            $('#loginform-inner span').empty();
            $('#loginform').get(0).reset();
        }
    });</pre></div></div>
    </div>
    
    <div class="example"><p><a href="#nojs" id="example-5">Morphing demonstration</a></p>
    <div class="code"><div><pre class="js">    $('#example-5').dialogbox({
        message: 'Click \'Morph\' to see me change!',
        type: 'confirm',
        title: 'Morphing box',
        className: 'blacknpink',
        morphing: 'normal',
        okText: 'Morph',
        cancelText: 'Close',
        confirm: function(b) {
            var x = Math.random() * 700,
                y = Math.random() * 500,
                w = 250 + (Math.random() * 200),
                s = 'some words... ',
                m = s,
                r = Math.random() * 15;
            for (var i = 0; i &lt; r; i++) {
                m += s;
            }
            b.set({
                message: m,
                position: [x, y],
                width: w
            });
        }
    });</pre></div></div>
    </div>
    
    <!-- nomd -->
    <form id="loginform" method="post" action="login.php">
        <fieldset>
            <legend>Login to continue:</legend>
            <div id="loginform-inner">
                <label for="username">Username:</label>
                <input type="text" name="username" value="username" id="username" />
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" />
                <span></span>
            </div>
            <input type="submit" value="Login" />
        </fieldset>
    </form>
    <!-- /nomd -->
    <h2 id="usage">Usage:</h2>
    
    <p>
        Include the stylesheet in the &lt;head&gt; section of the page:
    </p>
    <pre class="html">    &lt;link rel="stylesheet" type="text/css" href="dialogbox.css" /&gt;</pre>
    <p>
        Add the scripts at the bottom of the page:
    </p>
    <pre class="html">    &lt;script type="text/javascript" src="jquery-1.4.min.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="jquery-ui-1.7.2.custom.min.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="dialogbox.js"&gt;&lt;/script&gt;  </pre>

    <p>Attach a box to the click event of any element using the jQuery selector:</p>
    <pre class="js">    $('a.help').dialogbox('Some helpful information.');</pre>
    
    <p>The first argument is an object literal of key/value pairs to configure the box's content and behaviour, or a string to create a simple alert box (see below for a <a href="#options">a full list of options</a>). The default action and propagation of the event will be prevented unless the <a href="#option-preventDefault">preventDefault</a> / <a href="#option-stopPropagation">stopPropagation</a> options are set to <strong>false</strong> .</p>
    <p>To attach the box to other event types, specify the event in the second argument:</p>
    <pre class="js">    // show confirm dialog on form submission
    $('form.confirm').dialogbox({
        message: 'Are you sure you want to submit this data?',
        type: 'confirm',
        confirm: function(box, e) {
            // submit the form if user confirms
            $(e.target).unbind().submit();
        }
    }, 'submit');
    
    // show alert dialog when any ajax request fails
    $(document).dialogbox('Connection error! Please try again later.', 'ajaxError');
    
    // open a dialog on page load
    $(window).dialogbox({
        message: 'Do you have 5 minutes to take part in an annoying survey?',
        type: 'confirm',
        confirm: function() {
            window.location = 'annoying-survey.html'
        }
    }, 'load');</pre>
  
    <p>Alternatively, a function can be supplied as the first argument to return the required parameters. The argument of this function is the event that was triggered, so that the target element can be located.</p>
    
    <p>In this example, we have a table of products, any of which can be deleted. A confirmation dialog is attached to
     each delete button, and if confirmed, submits the button's form through an ajax request:</p>
    <h6>HTML:</h6>
    <pre class="html">    &lt;div id=&quot;product-holder&quot;&gt;
        &lt;table id=&quot;products&quot;&gt;
            &lt;tr&gt;
                &lt;td class=&quot;product-name&quot;&gt;Product One&lt;/td&gt;
                &lt;td&gt;
                    &lt;form action=&quot;delete.php&quot; method=&quot;post&quot;&gt;
                        &lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;1&quot; /&gt;
                        &lt;input type=&quot;submit&quot; value=&quot;Delete&quot; class=&quot;product-delete&quot; /&gt;
                    &lt;/form&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
                &lt;td class=&quot;product-name&quot;&gt;Product Two&lt;/td&gt;
                &lt;td&gt;
                    &lt;form action=&quot;delete.php&quot; method=&quot;post&quot;&gt;
                        &lt;input type=&quot;hidden&quot; name=&quot;id&quot; value=&quot;2&quot; /&gt;
                        &lt;input type=&quot;submit&quot; value=&quot;Delete&quot; class=&quot;product-delete&quot; /&gt;
                    &lt;/form&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;/table&gt;
    &lt;/div&gt;</pre>
    <h6>Javascript:</h6>
    <pre class="js">    function productDelete() {
        
        // trigger confirm dialog on each submit button in table
        $('input.product-delete').dialogbox(function(e) {
        
            // find the name of the product to be deleted,
            // so it can be shown in the confirmation message
            var $input = $(e.target),
                $row = $input.parents('tr'),
                productName = $row.children('td.product-name').text();
            
            return {
                message: 'Really delete ' + productName + '?',
                title: 'Delete product',
                type: 'confirm',
                confirm: function(box) {
                    
                    // add loading indicator
                    // (this also prevents the box from automatically closing)
                    box.addLoadbar();
                    
                    // submit form through ajax request
                    var $form = $input.parents('form');
                    $.post($form.attr('action'), $form.serialize(), function(response) {
                        
                        // close dialog and update product table with response
                        box.close();
                        $('#product-holder').html(response);
                        
                        // attach the dialog to submit buttons in the updated table
                        productDelete();
                    });
                }
            }
        });
    }</pre>
    <p>This will degrade gracefully if javascript is disabled.</p>
    <p>The dialogbox event can be detached using jQuery's <strong>unbind()</strong> on the target element:</p>
    <pre class="js">    $('#mylink').unbind('click.dialogbox'); // or 'submit.dialogbox' or whatever event was originally used
    </pre>
    
    <h2 id="options">Options:</h2>
    <p>This is the full list of options that can be applied; these can be passed when attaching the handler, opening a new box using <a href="#function-open">open()</a> or changing an existing box with <a href="#function-set">set()</a>. All options are optional. Default options can be set with <a href="#function-config">config()</a></p>
        
    <ul id="options-list" class="slide-list">
        <li>
            <h3 id="option-message">message</h3>
            <div><div>
                <p>The message to be displayed. If a DOM element is supplied, 
                    it will be converted into a jQuery collection.</p><p>
                    Be aware that the box itself is a form, so form fields can be added, but not an entire form element.
                    </p><p>
                    If an element from the page is added (as DOM element or jQuery collection) then the script will try to
                    restore the element to its original location in the page when the box is closed,
                    or if its content is subsequently replaced by another DOM element using 
                    <a href="#function-set">set()</a>. Note that this may
                    have unpredictable results if the element's parent or siblings have been moved or deleted since the 
                    box was opened. If necessary the <a href="#option-restore">restore</a> option can be set to
                    <strong>false</strong> to prevent the element from being restored.</p>
                <h4>Type:</h4>
                <p>String, jQuery collection or DOM element</p>
                <h4>Default:</h4>
                <p>(empty string)</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-title">title</h3>
            <div><div>
                <p>Title bar text.</p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>(empty string)</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-type">type</h3>
            <div><div>
                <p>'alert', 'confirm' or 'prompt'. Similarly to standard javascript dialog boxes, alert shows only 
                one button and will only execute the <a href="#option-confirm">confirm</a> option, 
                confirm boxes permit the user 
                to cancel, and prompt boxes additionally contain a single text or password input (see also 
                <a href="#option-promptText">promptText</a> and <a href="#option-promptType">promptType</a> 
                options for prompt boxes). </p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>'alert'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-confirm">confirm</h3>
            <div><div>
                <p>Function to be executed if ok button is clicked or the form is submitted through the keyboard.
                The box will be automatically closed after this function has executed, unless the function opens a new
                box, or alters the existing box using <a href="#function-set">set()</a> or 
                <a href="#function-addLoadbar">addLoadbar()</a>.</p>
                
                <p>This function optionally takes up to two arguments: the first is simply an alias of 
                <strong>$.fn.dialogbox</strong> to save typing, the second is the event that was triggered.</p>
                
                <p>These arguments are taken by all function options (<a href="#option-confirm">confirm</a>, 
                <a href="#option-cancel">cancel</a>, <a href="#option-open">open</a> and 
                <a href="#option-close">close</a>).</p>               
                <h4>Type:</h4>
                <p>Function</p>
                <h4>Default:</h4>
                <p><a href="http://api.jquery.com/jQuery.noop/">$.noop</a></p>
            </div></div>
        </li>
        <li>
            <h3 id="option-cancel">cancel</h3>
            <div><div>
                <p>Function to be executed if cancel button is clicked or user presses Escape. As with the 
                <a href="#option-confirm">confirm</a> option, the box will be closed after this function has completed, 
                unless it's been altered.</p>
                <p>This function takes the same arguments as <a href="#option-confirm">confirm</a>. </p>
                <h4>Type:</h4>
                <p>Function</p>
                <h4>Default:</h4>
                <p><a href="http://api.jquery.com/jQuery.noop/">$.noop</a></p>
            </div></div>
        </li>
        <li>
            <h3 id="option-open">open</h3>
            <div><div>
                <p>Callback function to be executed before the box has been created and faded onto the page.</p>
                <p>This function takes the same arguments as <a href="#option-confirm">confirm</a>. </p>
                <h4>Type:</h4>
                <p>Function</p>
                <h4>Default:</h4>
                <p><a href="http://api.jquery.com/jQuery.noop/">$.noop</a></p>
            </div></div>
        </li>
        <li>
            <h3 id="option-close">close</h3>
            <div><div>
                <p>Callback function to be executed after the box has been faded out and removed.</p>
                <p>This function takes the same arguments as <a href="#option-confirm">confirm</a>. </p>
                <p>For example, in the <a href="#example-4">login box above</a>, we grab a div within a hidden form on the page 
                for the box content. This is automatically restored to its original location in the page when the box
                is closed, so we use the <strong>close</strong> function
                 to reset it to its initial state by clearing the fields and removing any 
                error message.</p>
                <h4>Type:</h4>
                <p>Function</p>
                <h4>Default:</h4>
                <p><a href="http://api.jquery.com/jQuery.noop/">$.noop</a></p>
            </div></div>
        </li>
        <li>
            <h3 id="option-closeOnBlur">closeOnBlur</h3>
            <div><div>
                <p>Whether a box can be closed by clicking or tabbing away from it. 
                The <a href="#option-cancel">cancel</a> function (if any) will still be triggered 
                before the box is closed.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>false</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-okText">okText</h3>
            <div><div>
                <p>Text of OK button.</p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>'Ok'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-cancelText">cancelText</h3>
            <div><div>
                <p>Text of Cancel button.</p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>'Cancel'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-promptText">promptText</h3>
            <div><div>
                <p>Default text of prompt input.</p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>(empty string)</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-promptType">promptType</h3>
            <div><div>
                <p>Set this to 'password' if you want the prompt field to be a password input.</p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>'text'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-loadbar">loadbar</h3>
            <div><div>
                <p>Whether to add a loading indicator to the box.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>false</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-className">className</h3>
            <div><div>
                <p>Adds custom class to the containing form, so the appearance of different boxes
                can be customised with CSS. </p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>(empty string)</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-focus">focus</h3>
            <div><div>
                <p>Focus will be placed by default in the first available field in the box, which will be the Ok button
                if no other form fields have been added. To focus on a specific field, this option 
                can be supplied as a CSS selector. The target must be a visible form field within the box.</p>
                <h5>Example:</h5>
                <pre class="js">    $('a.dosomethingawful').dialogbox({
        message: 'Are you sure you want to do this terrible thing?',
        focus: '#dialogbox_cancel', // id of cancel button
        confirm: function() {
            // do something awful...
        }
    });</pre>
                <h4>Type:</h4>
                <p>String, or anything else to focus in the first available field.</p>
                <h4>Default:</h4>
                <p>false</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-restore">restore</h3>
            <div><div>
                <p>If the box message is a jQuery collection or DOM element, then the box will try to restore the element
                to its original location in the page when closed. Set this option to <strong>false</strong> 
                if this is not required.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>true</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-preventDefault">preventDefault</h3>
            <div><div>
                <p>Whether to prevent the default action of the event.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>true</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-stopPropagation">stopPropagation</h3>
            <div><div>
                <p>Whether the event should be prevented from bubbling up the DOM tree.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>true</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-position">position</h3>
            <div><div>
                <p>Offset from window top left; can be supplied as a string containing x and y coordinates, separated by a space , eg 'left 30', or as an array [x, y]. Coordinates can be strings 'left', 'right', 'top', 'bottom', 'center' or pixel value. Boxes can be offset from the right or bottom by supplying negative coordinates. If only one coordinate is supplied, the second will be assumed to be 'center'.</p>
                <h5>Examples:</h5>
                <p><strong>'top right'</strong> / <strong>'right top'</strong>, - top right of viewport,<br />
                 <strong>'top 20'</strong> / <strong>'20 top'</strong> 
                     - top edge of viewport, 20 pixels from the left,<br />
                <strong>'left -50'</strong> / <strong>'-50 left'</strong> 
                - left edge of viewport, 50 pixels from the right, <br />
                <strong>'50 200'</strong> / <strong>[50, 200]</strong> -
                     50 pixels from the left, 200 pixels from the top,<br />
                <strong>50</strong> - 50 pixels from the left, vertically centered,<br />
                <strong>'center 50'</strong> / <strong>['center', 50]</strong> - 
                    horizontally centred, 50 pixels from the top.</p>
                
                <h4>Type:</h4>
                <p>String, number or array</p>
                <h4>Default:</h4>
                <p>'center'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-width">width</h3>
            <div><div>
                <p>Box width, in pixels.</p>
                <h4>Type:</h4>
                <p>Number</p>
                <h4>Default:</h4>
                <p>270</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-maskOpacity">maskOpacity</h3>
            <div><div>
                <p>Opacity of background mask - should be a number between 0 and 1. Background colour and/or images
                can be set in the stylesheet.</p>
                <p>This option cannot be changed by <a href="#function-set">set()</a> as it's only applied
                when the box is initially faded onto the page.</p>
                <h4>Type:</h4>
                <p>Number</p>
                <h4>Default:</h4>
                <p>0.3</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-fading">fading</h3>
            <div><div>
                <p>Fade duration when box fades into the page. This can be a number in milliseconds, or any of the strings 'slow', 'normal', 'fast' - the same as for any jQuery animation.</p>
                <h4>Type:</h4>
                <p>String or number</p>
                <h4>Default:</h4>
                <p>'fast' for proper browsers, or 0 for IE. This is because the latter, even up to version 8, makes a mess of fading transparent pngs, and text in faded elements is very jaggedy, even when fully faded in.</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-morphing">morphing</h3>
            <div><div>
                <p>Duration of animations when box expands or contracts to fit new content, or is moved to a different position. This can be a number in milliseconds, or any of the strings 'slow', 'normal', 'fast' - the same as for any jQuery animation.</p>
                <h4>Type:</h4>
                <p>String or number</p>
                <h4>Default:</h4>
                <p>'fast'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-easing">easing</h3>
            <div><div>
                <p>The type of easing to be used in animations when the box's dimensions change. 
                <a href="http://gsgd.co.uk/sandbox/jquery/easing/">jquery.easing</a> is required for anything other
                than 'swing' or 'linear'. </p>
                <h4>Type:</h4>
                <p>String</p>
                <h4>Default:</h4>
                <p>'swing'</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-shakes">shakes</h3>
            <div><div>
                <p>If the user attempts to focus anywhere on the page outside of the box, it will give a little wobble before returning focus to the first available form field within the box. If you think this shaking is going to piss people off, then by all means set this to false.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>true</p>
            </div></div>
        </li>
        <li>
            <h3 id="option-draggable">draggable</h3>
            <div><div>
                <p>Whether the box can be dragged around the page. jQuery UI is not required if this is set to 
                <strong>false</strong>.</p>
                <h4>Type:</h4>
                <p>Boolean</p>
                <h4>Default:</h4>
                <p>true</p>
            </div></div>
        </li>
        
    </ul>
    
    <h2 id="functions">Methods:</h2>

    <p>These functions can be called from within any of the callback options (<a href="#option-confirm">confirm</a>,
        <a href="#option-cancel">cancel</a>, <a href="#option-open">open</a> or <a href="#option-close">close</a>) or from outside using <strong>$.dialogbox.[function_name]([arguments])</strong>. </p>

    <ul id="functions-list" class="slide-list">
        <li>
    <h3 id="function-open">open([options])</h3>
    <div class="function-info"><div>
    <p>Open a new dialog box. If there's already a box on the page, it will morph smoothly into the new one; otherwise the box will be faded onto the page. Focus will be placed in the first available form field on the box (which will be the Ok button if there are no fields in the message), unless the <a href="#option-focus">focus</a> option is specified.</p>
    <h4>Arguments</h4>
    <p>An object of key/value pairs, or a string to create a simple alert box. </p>

    <h4>Returns</h4>
    <p>$.fn.dialogbox</p>
    </div></div>
    </li>
    
    <li>
    <h3 id="function-set">set([options]) / set(option, value)</h3> 
    <div class="function-info"><div>
    <p>Alter any of the properties of an existing box. This will also remove the loading indicator, if present (see 
        <a href="#function-addLoadbar">addLoadbar()</a>. 
        Focus will be placed in the first available form field. Note that if a box does not exist, this function
        will not create one.</p>   
    <h4>Arguments</h4>    
    <p>Options to change;
     any options not set will be retained from those initially specified. 
     Passing a string to this function will replace the box content, but leave all other options intact 
     (ie, rather than converting to an alert box). </p>
    <p>Alternatively, a key/value pair can be passed to change a single option, eg <strong>$.fn.dialogbox.set('okText', 'Go')</strong>.</p>
    <p>This function can also be called with no arguments within the <a href="#option-confirm">confirm</a> or <a href="#option-cancel">cancel</a>
    functions to prevent the box from being closed.</p>
    <h4>Returns</h4>
    <p>$.fn.dialogbox</p>
    </div></div>
    
    </li>
    
    <li>
    <h3 id="function-close">close([callback])</h3>
    <div class="function-info"><div>
    <p>Close a box. It's not usually necessary to call this as boxes will be automatically closed 
    when the user confirms or cancels.</p>
    <h4>Arguments</h4>
    <p>
        <strong>callback</strong>: a function to call after the box has been faded out and removed from the page.
        As with all other callback functions, this takes two arguments: $.fn.dialogbox, and the event which triggered
        the original box.
    </p>
    <h4>Returns</h4>
    <p>$.fn.dialogbox</p>
    </div></div>
    </li>
    
    <li>
    
    <h3 id="function-preload">preload()</h3>
    <div class="function-info"><div>
    <p>Preload the box's background images and loading indicator - this is done by simply opening the box, adding a loading indicator, and immediately closing. Though invisible to the user, it's enough to trick the browser into fetching the necessary images. This prevents the first opened box showing momentarily without its background while images are loading.</p>
    <h4>Returns</h4>
    <p>$.fn.dialogbox</p>
    </div></div>
    </li>
    
    <li>
    
    <h3 id="function-addLoadbar">addLoadbar()</h3>
    <div class="function-info"><div>
    <p>Adds a loading indicator on top of the box buttons. Confirm and cancel functions are disabled while the loader is present.</p>
    <h4>Returns</h4>
    <p>$.fn.dialogbox</p>
    </div></div>
    </li>
    
    <li>
    
    <h3 id="function-removeLoadbar">removeLoadbar()</h3>
    <div class="function-info"><div>
    <p>Removes loading indicator and re-enables confirm and cancel functions. This is called automatically if the box is altered using
    <a href="#function-set">set()</a>. </p>
    <h4>Returns</h4>
    <p>$.fn.dialogbox</p>
    </div></div>
    </li>
    
    <li>
    
    <h3 id="function-prompt">prompt([value])</h3>
    <div class="function-info"><div>
    <p>For prompt boxes, get or set value of prompt input.</p>
    <h4>Arguments</h4>
    <p>The value to set the prompt input, or empty to retrieve the current value.</p>
    <h4>Returns</h4>
    <p>The current value of prompt input (when called with one argument) or $.fn.dialogbox.</p>
    </div></div>
    </li>
    
    <li>
    
    <h3 id="function-form">form([fields]) / form(field, [value])</h3>  
    <div class="function-info"><div>
    <p>Get or set values of form field(s) within the box.</p>
    <h4>Arguments</h4>
    <p>If a single arguement is used, this can be an object of key/value pairs of field values to be set,
    an array of objects (as returned from jQuery <a href="http://api.jquery.com/serializeArray/">serializeArray()</a>,
    or a field name to retrieve the value of that field.</p>
    <p>Alternatively, a key/value pair can be passed to change a single field.</p>
    <h4>Returns</h4>
    <p>If getting, the value of the selected field, or if no arguments supplied, an array of objects (equivalent to calling <a href="http://api.jquery.com/serializeArray/">serializeArray()</a> on the box form.
    If setting, returns $.fn.dialogbox.</p>
    </div></div>
    </li>
    
    <li>
        <h3 id="function-serialize">serialize()</h3>
        <div class="function-info"><div>
        <p>Encode all form fields within the box as a string for submission. Basically returns the jQuery function 
        <a href="http://api.jquery.com/serialize/">serialize()</a> on the box form.</p>
        <h4>Returns</h4>
        <p>A string of form fields - see the jQuery documentation for more information.</p>
        </div></div>
    </li>
    
    <li>
        <h3 id="function-exists">isOpen()</h3>
        <div class="function-info"><div>
        <p>Checks whether there's currently a box in the page.</p>
        <h4>Returns</h4>
        <p>Boolean true if there is a box, false otherwise.</p>
        </div></div>
    </li>
    
    <li> 
       
    <h3 id="function-config">config([options]) / config(option, [value])</h3> 
    <div class="function-info"><div>
    <p>Get or set default options for new boxes.</p> 
    <h4>Arguments</h4>
    <p>If a single arguement is used, this can be an object of key/value pairs of options to be set, or an option name
    to retrieve the value of that option.</p>
    <p>Alternatively, a key/value pair can be passed to change a single option.</p>
    <h4>Returns</h4>
    <p>If getting, the value of the selected option, or a key/value object of all
    options. If setting, returns $.fn.dialogbox.</p>
    </div></div>
    </li>
    
    </ul>
    
    <h2>Dependencies</h2>
    
    <ul id="dependencies-list">
        <li><a href="http://docs.jquery.com/Downloading_jQuery#Download_jQuery">jQuery 1.4+</a>.</li>
        <li><a href="../jquery.simpledrag.js">simpleDrag</a> plugin for dragging boxes, unless the
        <a href="#option-draggable">draggable</a> option is globally disabled.</li>
        <li><a href="http://gsgd.co.uk/sandbox/jquery/easing/">jquery.easing</a> if using funny easing methods.</li>
        <li>If using alpha-transparent pngs, a png-fix for IE6 such as <a href="http://www.dillerdesign.com/experiment/DD_belatedPNG/">DD_belatedPNG</a>. </li>
    </ul>
    
    <!-- mdend -->
    
    <p id="nojs">No javascript?</p>
    
    <h2 id="playpen">The Playpen</h2>
    
    <p>This is just an area for experimentation and testing. Modify the object literal to create a box on this page. Can't get rid of the box, type <strong>$.fn.dialogbox.close()</strong> into firebug.</p>
    
    <form action="" id="playpen-form" onsubmit="return false">    	<div><textarea name="" id="playpen-textarea" cols="30" rows="10">{
    cancel: $.noop,
    cancelText: 'Cancel',
    className: '',
    close: $.noop,
    closeOnBlur: false,
    confirm: $.noop,
    draggable: true,
    easing: 'swing',
    fading: $.browser.msie ? 0 : 'fast',
    focus: false,
    loadbar: false,
    maskOpacity: 0.3,
    message: '',
    morphing: 'fast',
    okText: 'Ok',
    open: $.noop,
    position: 'center',
    preventDefault: true,
    stopPropagation: true,
    promptText: '',
    promptType: 'text',
    restore: true,
    title: '',
    type: 'alert',
    shakes: true,
    width: 270
}</textarea></div>
        <div><input type="submit" value="Run code" /></div>    </form>

</div> 
<script type="text/javascript" src="jquery-1.4.1.min.js"></script>
<script type="text/javascript" src="jquery.easing.1.3.js"></script>
<script type="text/javascript" src="../jquery.dialogbox.js"></script>
<script type="text/javascript" src="jquery.textarea.js"></script>
<script type="text/javascript" src="autoresize.jquery.min.js"></script>
<script type="text/javascript" src="../jquery.simpledrag.js"></script>
<script type="text/javascript"> 
//<![CDATA[

$(function(){
    
    // preload images
    $.fn.dialogbox.preload();

    // example 1: simple alert box
    $('#example-1').dialogbox('Alert!');
    
    // example 2: confirm box
    $('#example-2').dialogbox({
        message: 'Confirm?',
        type: 'confirm',
        confirm: function(box) {
            box.open('Confirmed!');
        },
        cancel: function(box) {
            box.open('Cancelled!');
        }
    });
    
    // example 3: prompt box
    $('#example-3').dialogbox({
        message: 'What is your name?',
        type: 'prompt',
        confirm: function(box) {
            var answer = $.trim(box.prompt().replace(/[^a-z0-9\s]/ig, ''));
            box.open('Hello, ' + (answer ? answer : 'anonymous') + '!');
        }
    });
    
    // example 4: custom form fields and ajax request
    // hide the form
    $('#loginform').hide();
    $('#example-4').dialogbox({
        
        // use a div within the form as the message
        message: $('#loginform-inner'),
        type: 'confirm',
        
        // get box title and ok button text
        // from the form's legend and submit button respectively
        title: $('#loginform legend').text(),
        okText: $('#loginform input[type=submit]').val(),
        
        // focus on password field
        focus: '#password',
        confirm: function(box) {
            
            // add loading indicator
            // (this also prevents the box from automatically closing)
            box.addLoadbar();
            
            // and send ajax request with the form data from the box
            $.post($('#loginform').attr('action'), box.serialize(), function(response) {
                
                if (!response) {
                    $(document).trigger('ajaxError');
                    return;
                }
                
                // if login successful, open alert box with success message
                if (response.success) {
                    box.open(response.report);
                    
                // otherwise, add error message to box content
                } else {
                    $('#loginform-inner span').text(response.report);
                    
                    // animate the box to accomodate new content
                    box.set();
                }
            }, 'json');
        },
        
        // when the box is closed, the div is restored to its original location,
        // so just need to restore it to its initial state for when the box is reopened
        close: function() {
            $('#loginform-inner span').empty();
            $('#loginform').get(0).reset();
        }
    });
    
    // exampe 5: morphing demo
    $('#example-5').dialogbox({
        message: 'Click \'Morph\' to see me change!',
        type: 'confirm',
    	title: 'Morphing box',
        className: 'blacknpink',
    	morphing: 'normal',
    	okText: 'Morph',
    	cancelText: 'Close',
        confirm: function(b) {
            var x = Math.random() * 700,
                y = Math.random() * 500,
                w = 250 + (Math.random() * 200),
                s = 'some words... ',
                m = s,
                r = Math.random() * 15;
            for (var i = 0; i < r; i++) {
                m += s;
            }
            b.set({
                message: m,
                position: [x, y],
                width: w
            });
        }
    });
    
    // default ajax failure function
    $(document).dialogbox('Connection error! Please try again later.', 'ajaxError');
    
    // code highlighting
    $('pre').attr('name', 'code');
	dp.SyntaxHighlighter.ClipboardSwf = 'dp.SyntaxHighlighter/Scripts/clipboard.swf';
	dp.SyntaxHighlighter.HighlightAll('code');
    $('.code, #nojs').hide();
    $('.example p').append($('<a/>', {
        'class': 'slide',
        text: 'View code',
        href: '#'
    }));
    $('.slide').click(function(e) {
        var $link = $(this),
            $code = $link.parent().next('.code');
        if ($code.css('display') === 'none') {
            $code.slideDown('normal', function() {
                adjustPosition($link);
            });
            $link.text('Hide code');
        } else {
            $code.slideUp();
            $link.text('View code');
        }
        return false;
    });
    $('.slide').each(function() {    
        $(this).css({
            top: (($(this).parent().parent().outerHeight() - $(this).outerHeight()) / 2) + 'px'
        });    
    });
    
    // expand option info
    $('#options-list li > div').hide();
    $('#options-list h3').wrapInner($('<a/>', {
        'class': 'option-slide',
        href: '#'
    }));
    
    // expand function info
    $('.function-info').hide();
    $('h3[id^=function-]').wrapInner($('<a/>', {
        'class': 'function-slide',
        href: '#'
    }));
    
    // when a code sample/option/method info is expanded,
    // scroll to fit in window if necessary
    function adjustPosition($link) {
        
        var $parent = $link.parent(),
            top = $parent.offset().top - $(document).scrollTop();
        if (top > 0) {
            var totalHeight = $parent.height() + $parent.next().children('div').outerHeight(true) + 60;
            var winHeight = $(window).height();
            if (top + totalHeight > winHeight) {
                
                var targetOffset = $parent.offset().top;
                if (totalHeight < winHeight) {
                    targetOffset -= (winHeight - totalHeight);
                }
                $('html, body').stop().animate({scrollTop: targetOffset}, 'slow');
            }
        }  
    }
    
    $('.function-slide, .option-slide').click(function() {
        var $link = $(this);
        var $infodiv = $link.parent().next();
        if ($infodiv.css('display') === 'none') {
            $link.addClass('expanded');
            $infodiv.slideDown('normal', function() {
                adjustPosition($link);
            });
        } else {
            $link.removeClass('expanded');
            $infodiv.slideUp();
        }
        return false;
    });

    // add expand/collapse all links to collapsible lists
    $('<p class="expanders"></p>').append($('<a/>', {
        href: '#',
        text: 'Expand all',
        'class': 'expand-all',
        click: function() {
            $(this).parent().next().children().each(function() {
                var div = $(this).children('div');
                if (div.css('display') === 'none') {
                    div.slideDown();
                    $(this).find('h3 a').addClass('expanded');
                }
            })
            return false;
        }
    })).append($('<a/>', {
        href: '#',
        text: 'Collapse all',
        'class': 'collapse-all',
        click: function() {
            $(this).parent().next().children().each(function() {
                var div = $(this).children('div');
                if (div.css('display') !== 'none') {
                    div.slideUp();
                    $(this).find('h3 a').removeClass('expanded');
                }
            });
            return false;
        }
    })).insertBefore($('.slide-list'));
    
    // add box on top of example image when clicked
    $('img').dialogbox(function(e) {
        var offset = $(e.target).offset()
        var top = offset.top - $(document).scrollTop();
        top = top > 0 ? top : 0;
        return {
            message: 'Please enter your email address:',
            title: 'Subscribe to newsletter',
            type: 'prompt',
            position: [offset.left, top]
        };
    });
    
    // add title to external links for tooltips
    $('a').each(function() {
        if (location.hostname !== this.hostname) {
            $(this).addClass('external').attr('title', $(this).attr('href').replace('http://', ''));
        }
    });

    // tooltips
    $('*[title]').mouseenter(function() {
        var $elm = $(this);
        $elm.data('title', $elm.data('title') || $elm.attr('title')).attr('title', '');
        if (!$elm.data('title')) {
            return;
        }
        $('.tip').remove();
        $('<div/>', {
            css: {
                left: ($elm.offset().left + (parseInt($elm.css('margin-left').replace('px', '')) || 0)) + 'px',
                top: ($elm.offset().top + $elm.outerHeight() + 7) + 'px',
                opacity: 0
            },
            'class': 'tip',
            text: $elm.data('title')
        }).appendTo('body').animate({
            opacity:1
        });
    }).mouseleave(function() {
        $('.tip').animate({
            top:'+=10',
            opacity:0
        }, 'normal', 'swing', function() {
            if ($('.tip').css('opacity') === 0) {
                $('.tip').remove();
            }
        });
    }).mousemove(function(e) {
        var t = $('.tip'),
            h = t.outerHeight(),
            w = t.outerWidth(),
            winWidth = $(window).width(),
            winHeight = $(window).height() + $(document).scrollTop(),
            after = winWidth - e.pageX - 10,
            lower = winHeight - e.pageY - 30;
        t.css({
            top: ((winHeight - e.pageY - 30) < h && e.pageY > lower ? e.pageY - h - 10 : e.pageY + 30) + 'px',
            left: ((winWidth - e.pageX - 10) < w && e.pageX > after ? e.pageX - w - 10 : e.pageX + 10) + 'px'
        });
    });

    // smooth scrolling to anchors
    $('a[href*=#]').click(function() {
    
        if ($(this).attr('id')) {
            return;
        }
        if (location.pathname.replace(/^\//,'') === this.pathname.replace(/^\//,'')
            && location.hostname === this.hostname) {
            
            var $target = $(this.hash);       
            $target = $target.length && $target || $('[name=' + this.hash.slice(1) +']');     
            if ($target.length) {
            
                var targetOffset = $target.offset().top,
                    done = false;
                $('html, body').stop().animate({scrollTop: targetOffset}, 1000, 'swing', function() {
                    if (done) {
                        return;
                    }
                    done = true;
                    // expand method/option info if this was the target
                    var $link = $target.children('a');
                    if ($link.length && !$link.hasClass('expanded')) {
                        setTimeout(function() {
                            $link.click();
                        }, 100);
                    }
                });
                return false;               
            }     
        }
    });
    
    // fade footer
    $('#toc').fadeTo('slow', 0.8).mouseover(function() {
        if (!$(this).hasClass('sliding')) {
            $(this).stop().fadeTo('slow', 1);
        }
    }).mouseout(function() {
        if (!$(this).hasClass('sliding')) {
            $(this).stop().fadeTo('slow', 0.8);
        }
    });

    // show / hide footer
    $('#hide_link').click(function() {
        
        var toc = $('#toc > div'),
            $link = $(this);
        $link.addClass('sliding');
        if ($link.text() === 'Show') {
            $link.text('Hide');
            toc.stop().animate({width: $(document).width() + 'px', opacity: 1}, 'normal', 'swing', function() {
                $link.removeClass('sliding');
            });
            $link.stop().animate({paddingRight: '20px'});
        }
        else {
            $link.text('Show');
            toc.stop().animate({width: 0, opacity: 0}, 'normal', 'swing', function() {
                $link.removeClass('sliding');
            });
            $link.stop().animate({paddingRight: '5px'});
        }
        return false;
    });
    
    // playpen form
    $('#playpen-form').dialogbox(function() {
        var options;
        try {
            eval('options = ' + $('#playpen-textarea').val());
        } catch(e) {
            options = {
                title: 'Script error!',
                message: e.toString()
            };
        }
        return options;
    }, 'submit');
    $('#playpen-textarea').tabby({tabString: '    '}).autoResize().keydown();
});

function alert(message) {
    $.fn.dialogbox.open(message);
}

//]]>
</script>
<!--[if lte IE 6]>
<script src="DD_belatedPNG_0.0.8a-min.js"></script>
<script>
  /* EXAMPLE */
  DD_belatedPNG.fix('#dialogbox_top_left, #dialogbox_top_right, #dialogbox_bottom_left, #dialogbox_bottom_right'); 
  
  /* string argument can be any CSS selector */
  /* .png_bg example is unnecessary */
  /* change it to what suits you! */
</script>
<![endif]-->
</body>
</html>